<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coastal Risk Intelligence Explorer</title>

  <!-- CDNs -->
  <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    #map { height: 500px; }
    .shoreline { transition: all 0.5s ease; }
    .spinner { border-top-color: transparent; }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-blue-800 mb-4">Coastal Risk Intelligence Explorer</h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Map -->
      <div class="md:col-span-2">
        <div id="map" class="rounded-lg shadow-lg"></div>
      </div>

      <!-- Controls -->
      <div class="bg-white p-4 rounded-lg shadow-lg space-y-4">
        <h2 class="text-xl font-semibold">Parameters</h2>

        <div>
          <label for="seaLevel" class="block text-sm font-medium">Sea Level Rise (mm)</label>
          <input id="seaLevel" type="range" min="0" max="2000" value="500"
                 class="w-full" oninput="updateSimulation()">
          <span id="seaLevelValue" class="text-sm">500mm</span>
        </div>

        <div>
          <label for="waveEnergy" class="block text-sm font-medium">Wave Energy</label>
          <input id="waveEnergy" type="range" min="0" max="100" value="50"
                 class="w-full" oninput="updateSimulation()">
          <span id="waveEnergyValue" class="text-sm">50%</span>
        </div>

        <div>
          <label for="soilType" class="block text-sm font-medium">Soil Type</label>
          <select id="soilType" class="w-full border rounded p-1" onchange="updateSimulation()">
            <option value="sand">Sand</option>
            <option value="clay">Clay</option>
            <option value="rock">Rock</option>
          </select>
        </div>

        <div>
          <label for="scenario" class="block text-sm font-medium">Climate Scenario</label>
          <select id="scenario" class="w-full border rounded p-1" onchange="updateSimulation()">
            <option value="rcp45">RCP 4.5</option>
            <option value="rcp60">RCP 6.0</option>
            <option value="rcp85">RCP 8.5</option>
          </select>
        </div>

        <div>
          <label for="defense" class="block text-sm font-medium">Coastal Defense</label>
          <select id="defense" class="w-full border rounded p-1" onchange="updateSimulation()">
            <option value="none">None</option>
            <option value="seawall">Seawall</option>
            <option value="breakwater">Breakwater</option>
          </select>
        </div>

        <div class="space-y-2">
          <button onclick="startAnimation()"
                  class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            Start Animation
          </button>
          <button onclick="exportReport()"
                  class="w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            Export Report
          </button>
          <div id="loading" class="hidden text-center">
            <div class="w-6 h-6 mx-auto border-4 border-blue-500 rounded-full animate-spin spinner"></div>
            <p class="text-sm mt-1 text-gray-500">Animating...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Graphs -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
      <div class="bg-white p-4 rounded-lg shadow-lg">
        <canvas id="erosionChart"></canvas>
      </div>
      <div class="bg-white p-4 rounded-lg shadow-lg">
        <canvas id="economicChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    const map = L.map('map').setView([51.505, -0.09], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const shoreline = L.polyline([
      [51.5, -0.1],
      [51.51, -0.09],
      [51.52, -0.08]
    ], { color: 'blue', className: 'shoreline' }).addTo(map);

    const erosionCtx = document.getElementById('erosionChart').getContext('2d');
    const economicCtx = document.getElementById('economicChart').getContext('2d');

    const erosionChart = new Chart(erosionCtx, {
      type: 'line',
      data: {
        labels: ['2020', '2030', '2040', '2050', '2060'],
        datasets: [{
          label: 'Erosion Rate (m/year)',
          data: [0, 0, 0, 0, 0],
          borderColor: 'red',
          fill: false
        }]
      }
    });

    const economicChart = new Chart(economicCtx, {
    }
  )